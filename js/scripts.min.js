(function(){function t(n,t,r){for(var f=n,e=t.split("."),u=0;u<e.length-1;u++)typeof f[e[u]]=="undefined"&&(f[e[u]]={}),f=f[e[u]];typeof f[e[u]]=="object"&&typeof r=="object"?i(f[e[u]],r):f[e[u]]=r}function i(n,t){for(var r in t)typeof n[r]=="object"?i(n[r],t[r]):n[r]=t[r]}function u(n,t){var i=n;return t.split(".").forEach(function(n){typeof i!="undefined"&&(i=i[n])}),i}function r(n,t){return typeof n=="undefined"?t:n}var n=angular.module("netcore-simple",[]);n.directive("popupUrl",function(){return{scope:!0,restrict:"A",controller:function(n,t,i){i.bind("click",function(){window.open(t.popupUrl,"pop","width="+t.popupWidth+", height="+t.popupHeight)})}}});n.directive("formSubmit",function(){return{scope:!0,restrict:"A",controller:function(n,t,i,u){n.errorsHandle={};typeof n.frm=="undefined"&&(n.frm={});u.bind("submit",function(){$.ajax({type:r(i.formMethod,"POST"),url:i.formSubmit,data:n.frm,success:function(r,u,f){f.status===200&&(typeof i.formResult!="undefined"&&(n[i.formResult]=f.responseJSON),typeof i.formRootResult!="undefined"&&(t[i.formRootResult]=f.responseJSON),n.$apply(function(){n.errorsHandle={};typeof i.formSuccess!="undefined"&&n.$eval(i.formSuccess);typeof i.formSuccess!="undefined"&&(window.location=i.formSuccessUrl)}))},error:function(t){t.status===400&&t.responseJSON.forEach(function(t){n.$apply(function(){n.errorsHandle[t.key]=t.errors})})}})})}}});n.directive("inputInfo",function(){return{restrict:"A",scope:!0,controller:function(n,t,i){n.$parent.$watch("errorsHandle."+t.inputInfo,function(t){typeof t=="undefined"&&(t=[]);n.errors=t;t.length===0?i.removeClass("has-error"):i.addClass("has-error")})}}});n.directive("selectUrl",function(){return{restrict:"A",scope:!0,controller:function(n,t,i){n.selected=0;n.display=i.selectText;n.UpdateSearch=function(){var t=typeof i.selectFilter=="undefined"?"filters."+i.selectModel:i.selectFilter,r=typeof t=="undefined"?n.filter:u(n.$parent,t);$.ajax({type:"GET",url:i.selectUrl,data:r,success:function(t,i,r){r.status===200&&n.$apply(function(){n.options=r.responseJSON})}})};n.$watch("filter",n.UpdateSearch,!0)}}});n.directive("selectModel",function(){return{restrict:"A",scope:!0,controller:function(n,i){var u=r(i.selectFilter,"filters."+i.selectModel);n.$parent!==null&&(n.$parent.filters===null&&(n.$parent.filters={}),n.$watch("filter",function(){typeof n.filter!="undefined"&&t(n.$parent,u,n.filter)},!0),n.$parent.$watch(u,n.UpdateSearch));n.setValue=function(r){typeof r=="undefined"&&(r={text:i.selectText});n.display=r.text;var f=i.selectModel,u=n.$parent;u===null&&(u=n);t(u,"displays."+f,r.text);t(u,f,r.value)}}}});n.directive("selectOption",function(){return{restrict:"A",scope:!0,controller:function(n,t){var i=n.$parent.option;t.bind("click",function(){n.$parent.$parent.$apply(function(n){var t=n.setValue;typeof t!="undefined"&&t(i)})});typeof i!="undefined"&&(n.display=i.text)}}})})();